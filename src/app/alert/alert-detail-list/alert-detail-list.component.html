<p-table
  #dt2
  [value]="alerts()"
  [rows]="10"
  [rowsPerPageOptions]="[10, 25, 50]"
  [paginator]="true"
  [globalFilterFields]="['created_at', 'value', 'note', 'severity']"
  [customSort]="true"
  (sortFunction)="customSort($event)"
  [tableStyle]="{ width: '100%' }">
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="created_at" style="width: 25%">
        <div class="flex justify-between items-center">
          Created at
          <p-sortIcon field="created_at" />
          <p-columnFilter
            type="date"
            field="created_at"
            display="menu"
            class="ml-auto"></p-columnFilter>
        </div>
      </th>
      <th style="width: 30%">
        <div class="flex justify-between items-center">
          Value
          <p-columnFilter
            type="text"
            field="value"
            display="menu"
            class="ml-auto"></p-columnFilter>
        </div>
      </th>
      <th style="width: 25%">
        <div class="flex justify-between items-center">
          Note
          <p-columnFilter
            type="text"
            field="note"
            display="menu"
            class="ml-auto"></p-columnFilter>
        </div>
      </th>
      <th pSortableColumn="severity" style="width: 20%">
        <div class="flex justify-between items-center">
          Severity
          <p-sortIcon field="severity" />
          <p-columnFilter
            field="severity"
            matchMode="equals"
            display="menu"
            class="ml-auto">
            <ng-template
              pTemplate="filter"
              let-value
              let-filter="filterCallback">
              <p-select
                [(ngModel)]="selectedSeverity"
                [options]="severityOptions"
                (onChange)="filter($event.value)"
                placeholder="Select Severity"
                [showClear]="true">
                <ng-template pTemplate="item" let-option>
                  <p-tag
                    [value]="option.value"
                    [severity]="severityToColor(option.label)" />
                </ng-template>
              </p-select>
            </ng-template>
          </p-columnFilter>
        </div>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-item>
    <tr>
      <td>
        {{ prettyDate(item.created_at) }}
      </td>
      <td>
        <pre>{{ item.value | json }}</pre>
      </td>
      <td>
        {{ item.note }}
      </td>
      <td>
        <p-tag
          [value]="severityToString(item.severity)"
          [severity]="severityToString(item.severity)">
        </p-tag>
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="4">No alerts found.</td>
    </tr>
  </ng-template>
</p-table>
